import{_ as J}from"./DK4FrFm5.js";import{u as K,a as S,_ as Q,b as F}from"./BGttP_So.js";import{_ as W}from"./Bph_qlo8.js";import{d as X,A as Y,u as Z,q as aa,B as q,C as D,a as G,c as i,v as T,g as p,D as V,e as a,h as l,b as g,t as b,F as z,r as ea,i as ta,o as n,w as oa,f as sa,j as na,k as ra,_ as ca}from"./C6S7ryDZ.js";import{_ as ia}from"./CZIZTLwG.js";import{u as la}from"./KIB2vAB8.js";import"./C18qQEDI.js";const ua={class:"sub-category","aria-labelledby":"sub-category"},_a={class:"sub-category__buttons"},ga={class:"sub-category__category-title"},ma={key:0,class:"sub-category__list"},da={class:"sub-category__title"},pa={key:0,class:"error"},ba=12,fa=X({__name:"index",setup(ya){var k,v;const{find:f}=K(),r=Y(),{categorySlug:u}=r.params,{currentLocale:o}=Z(),{goBack:A,goForward:E}=la(),I=na(),c=aa(r.query.page?+r.query.page:1),{data:t,pending:M,error:y}=S(`category-${o.value}-${u}`,async()=>{const e=await f("categories",{filters:{slug:{$eq:u},locale:o.value},fields:["id","name"]});if(!e.data||e.data.length===0)throw ta({statusCode:404,statusMessage:"subcategory - Not Found"});return e.data[0]}),{data:m,pending:P,refresh:R}=S(`subcategories-${u}-${c.value}`,async()=>t.value?await f("subcategories",{filters:{category:t.value.id,locale:o.value},populate:{image:{fields:["alternativeText","url"]}},pagination:{page:c.value,pageSize:ba}}):null,{watch:[c,t]}),h=q(()=>M.value||P.value),j=q(()=>{var e,d,_;return((_=(d=(e=m.value)==null?void 0:e.meta)==null?void 0:d.pagination)==null?void 0:_.pageCount)||1});return D(()=>r.query.page,e=>{c.value=e?+e:1,R()}),G({title:((k=t.value)==null?void 0:k.name)||"",description:((v=t.value)==null?void 0:v.name)||""}),D(t,e=>{e&&G({title:e.name,description:e.name})}),(e,d)=>{var x,C,$,B;const _=J,w=Q,O=W,U=ra,H=ia;return n(),i(z,null,[T(l(_,{class:"loader"},null,512),[[V,a(h)]]),T(g("section",ua,[g("div",_a,[l(w,{onClick:a(A),icon:"material-symbols:arrow-back","aria-label":a(F)[a(o)].ariaLabelGoBack,"name-class":"go-forward-back"},null,8,["onClick","aria-label"]),l(w,{onClick:a(E),icon:"material-symbols:arrow-forward","aria-label":a(F)[a(o)].ariaLabelGoForward,"name-class":"go-forward-back"},null,8,["onClick","aria-label"])]),g("h1",ga,b((x=a(t))==null?void 0:x.name),1),($=(C=a(m))==null?void 0:C.data)!=null&&$.length?(n(),i("ul",ma,[(n(!0),i(z,null,ea(a(m).data,s=>(n(),i("li",{key:s.id,class:"sub-category__item"},[l(U,{class:"sub-category__link",to:`/${a(o)}/${a(u)}/${s.slug}`},{default:oa(()=>{var L,N;return[g("h2",da,b(s.name),1),(L=s.image)!=null&&L.length?(n(),sa(O,{key:0,src:`${a(I).public.strapi.url}${(N=s.image[0])==null?void 0:N.url}`,alt:s.name,class:"sub-category__image",format:"webp",loading:"lazy",decoding:"async",width:"240",height:"180"},null,8,["src","alt"])):p("",!0)]}),_:2},1032,["to"])]))),128))])):p("",!0),l(H,{class:"sub-category__pagination",page:a(c),pageCount:a(j),routeName:((B=a(r).name)==null?void 0:B.toString())||""},null,8,["page","pageCount","routeName"])],512),[[V,!a(h)]]),a(y)?(n(),i("div",pa,b(a(y).message),1)):p("",!0)],64)}}}),Ba=ca(fa,[["__scopeId","data-v-3db18f15"]]);export{Ba as default};
