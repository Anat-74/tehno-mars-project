import{_ as ea}from"./DK4FrFm5.js";import{u as sa,a as I,_ as oa,b as v}from"./BGttP_So.js";import na from"./C18qQEDI.js";import{_ as ra,f as ca}from"./C-LPxFeU.js";import{_ as la}from"./Bph_qlo8.js";import{d as ia,A as ua,u as da,q as A,B as G,C as w,a as V,c as p,v as x,g as m,D as z,e as a,h as g,b as s,f as b,t as r,E as _a,G as pa,F as E,r as ma,i as ga,o as n,w as ba,j as ya,k as fa,n as va,_ as ha}from"./C6S7ryDZ.js";import{_ as ka}from"./CZIZTLwG.js";import{p as h}from"./BPjmuf9G.js";import{v as Ca}from"./C0WyR1D4.js";import{u as wa}from"./KIB2vAB8.js";import{u as xa}from"./J_q0yOXI.js";import{u as Sa}from"./ZoTlVub3.js";const $a={class:"subcategory-products","aria-labelledby":"subcategory-products"},La={class:"subcategory-products__row-top"},Ba={class:"subcategory-products__select-wrapper select-wrapper"},Na={class:"visually-hidden",for:"sort-subcategory-product"},Pa={class:"option",value:"name:asc"},qa={class:"option",value:"price:asc"},Da={class:"option",value:"price:desc"},Fa={class:"subcategory-products__subcategory-title"},Ta={class:"visually-hidden"},Ia={key:0,class:"subcategory-products__list"},Aa={class:"subcategory-products__items-bottom"},Ga={class:"subcategory-products__title"},Va={key:0,class:"error"},za=12,Ea=ia({__name:"index",setup(Ma){var N,P;const{find:S}=sa(),u=ua(),{currentLocale:o}=da(),{goBack:M,goForward:R}=wa(),{isInCart:j}=xa(),O=ya(),U=Sa(),c=A("name:asc"),d=A(u.query.page?+u.query.page:1),{categorySlug:k,subcategorySlug:_}=u.params,{data:l,pending:H,error:$}=I(`subcategory-${o.value}-${_}`,async()=>{const t=await S("subcategories",{filters:{slug:{$eq:_},category:{slug:{$eq:k}},locale:o.value},fields:["id","name"]});if(!t.data||t.data.length===0)throw ga({statusCode:404,statusMessage:"Products subCategory Not Found"});return t.data[0]}),{data:y,pending:J,refresh:K}=I(`products-${_}-${d.value}-${c.value}`,async()=>l.value?await S("products",{filters:{subcategory:l.value.id,locale:o.value},populate:{image:{fields:["alternativeText","url"]}},sort:c.value,pagination:{page:d.value,pageSize:za}}):null,{watch:[d,c,l]}),L=G(()=>H.value||J.value),B=G(()=>{var t,i;return(i=(t=y.value)==null?void 0:t.meta)!=null&&i.pagination?y.value.meta.pagination.pageCount:1});w(()=>u.query.page,t=>{d.value=t?+t:1}),w(c,()=>{K()}),V({title:(N=l.value)==null?void 0:N.name,description:(P=l.value)==null?void 0:P.name}),w(l,t=>{t&&V({title:t.name,description:t.name})});const Q=t=>{U.addToCart(t,k,_)};return(t,i)=>{var q,D,F;const W=ea,f=oa,X=na,Y=ra,Z=la,aa=fa,ta=ka;return n(),p(E,null,[x(g(W,{class:"loader"},null,512),[[z,a(L)]]),x(s("section",$a,[s("div",La,[g(f,{onClick:a(M),icon:"material-symbols:arrow-back","aria-label":a(v)[a(o)].ariaLabelGoBack,"name-class":"go-forward-back"},null,8,["onClick","aria-label"]),g(f,{onClick:a(R),icon:"material-symbols:arrow-forward","aria-label":a(v)[a(o)].ariaLabelGoForward,"name-class":"go-forward-back"},null,8,["onClick","aria-label"]),s("div",Ba,[s("label",Na,r(a(h)[a(o)].labelSelect),1),x(s("select",{class:"subcategory-products__select select","onUpdate:modelValue":i[0]||(i[0]=e=>_a(c)?c.value=e:null),id:"sort-subcategory-product"},[i[1]||(i[1]=s("option",{class:"option",disabled:"",value:""},null,-1)),s("option",Pa,r(a(h)[a(o)].optionName),1),s("option",qa,r(a(h)[a(o)].optionPrice)+"(ðŸ¡¹) ",1),s("option",Da,r(a(h)[a(o)].optionPriceDesc)+"(ðŸ¡») ",1)],512),[[pa,a(c)]])])]),s("h1",Fa,r((q=a(l))==null?void 0:q.name),1),s("h2",Ta,r(a(Ca)[a(o)].sectionSubcategorySlugList),1),(D=a(y))!=null&&D.data.length?(n(),p("ul",Ia,[(n(!0),p(E,null,ma(a(y).data,e=>(n(),p("li",{key:e.id,class:"subcategory-products__item"},[e.isDiscount?(n(),b(X,{key:0,class:"subcategory-products__discount-icon",name:"mdi:discount"})):m("",!0),g(Y,{product:e,class:"subcategory-products__in-stock"},null,8,["product"]),g(aa,{class:"subcategory-products__link",to:`/${a(o)}/${a(k)}/${a(_)}/${e.slug}`},{default:ba(()=>{var C,T;return[(C=e.image)!=null&&C.length?(n(),b(Z,{key:0,class:"subcategory-products__image",src:`${a(O).public.strapi.url}${(T=e.image[0])==null?void 0:T.url}`,alt:e.name,loading:"lazy",decoding:"async",width:"240",height:"180"},null,8,["src","alt"])):m("",!0)]}),_:2},1032,["to"]),s("div",Aa,[s("h3",Ga,r(e.name),1),s("span",{class:va(["subcategory-products__price",{"subcategory-products__price_discount":e.isDiscount}])},r(a(ca)(e.price)),3),a(j)(e.id)?(n(),b(f,{key:1,class:"subcategory-products__add-to-cart",disabled:"","name-class":"small-add-to-cart",icon:"emojione-v1:left-check-mark","aira-label":a(v)[a(o)].ariaLabelAdded},null,8,["aira-label"])):(n(),b(f,{key:0,onClick:C=>Q(e),class:"subcategory-products__add-to-cart","name-class":"small-add-to-cart",icon:"qlementine-icons:add-to-cart-16","aria-label":a(v)[a(o)].label},null,8,["onClick","aria-label"]))])]))),128))])):m("",!0),a(B)>1?(n(),b(ta,{key:1,class:"subcategory-products__pagination",page:a(d),pageCount:a(B),routeName:((F=a(u).name)==null?void 0:F.toString())||""},null,8,["page","pageCount","routeName"])):m("",!0)],512),[[z,!a(L)]]),a($)?(n(),p("span",Va,r(a($).message),1)):m("",!0)],64)}}}),at=ha(Ea,[["__scopeId","data-v-0723f315"]]);export{at as default};
