import{_ as F,b as T,u as A,a as ct}from"./BGttP_So.js";import{_ as W}from"./Bph_qlo8.js";import B from"./C18qQEDI.js";import{d as M,u as S,l as G,c as h,o as m,F as H,r as J,g as w,f as N,b as e,h as c,e as t,t as r,w as q,j as K,n as P,k as X,m as I,_ as D,p as rt,q as x,s as nt,v as O,x as R,y as lt,z as it,a as _t,i as dt}from"./C6S7ryDZ.js";import{f as V,_ as ut}from"./C-LPxFeU.js";import{c as b,d as mt}from"./dQQQYe1A.js";import{u as L}from"./ZoTlVub3.js";import{_ as pt}from"./DYEqcEqN.js";import{u as gt}from"./KIB2vAB8.js";const ht={class:"cart-item"},bt={key:0,class:"cart-item__locale-warning"},ft={class:"cart-item__title"},yt={class:"cart-item__price"},vt={class:"cart-item__controls"},kt={class:"quantity-value","aria-live":"polite",role:"status","aria-atomic":"true"},wt=M({__name:"CartShopping",setup(C){const o=L(),i=K(),{currentLocale:l}=S(),y=n=>`/${l.value}/${n.categorySlug}/${n.subcategorySlug}/${n.slug}`,g=n=>{const{switchLocale:s}=S();s(n)};return G(()=>{o.loadCart()}),(n,s)=>{const f=B,p=F,d=W,$=X;return m(),h("ul",ht,[(m(!0),h(H,null,J(t(o).items,a=>(m(),h("li",{key:a.product.id,class:"cart-item__item"},[a.product.originalLocale!==t(l)?(m(),h("div",bt,[c(f,{name:"mdi:alert"}),e("span",null,r(t(b)[t(l)].warningLocale),1),c(p,{label:a.product.originalLocale,"name-class":"switch-locale-cart",onClick:_=>g(a.product.originalLocale)},null,8,["label","onClick"])])):w("",!0),a.product.isDiscount?(m(),N(f,{key:1,class:"cart-item__discount-icon",name:"mdi:discount"})):w("",!0),e("h3",ft,r(a.product.name),1),c($,{to:y(a.product),class:P(["cart-item__link",{"cart-item__link_disabled":a.product.originalLocale!==t(l)}])},{default:q(()=>[c(d,{class:"cart-item__image",src:`${t(i).public.strapi.url}${a.product.image}`,alt:a.product.name,format:"webp",loading:"lazy",decoding:"async",width:"144",height:"108"},null,8,["src","alt"])]),_:2},1032,["to","class"]),e("span",yt,[c(f,{name:"my-icon:icon-by-regular"}),I(" "+r(t(V)(a.product.price)),1)]),e("div",vt,[c(p,{onClick:_=>t(o).updateQuantity(a.product.id,a.quantity-1),disabled:a.quantity<=1,"name-class":"remove-quantity-prod","aria-label":t(T)[t(l)].ariaLabelReduceQuantity},null,8,["onClick","disabled","aria-label"]),e("span",kt,r(a.quantity),1),c(p,{onClick:_=>t(o).updateQuantity(a.product.id,a.quantity+1),"name-class":"add-quantity-prod","aria-label":t(T)[t(l)].ariaLabelIncreaseQuantity},null,8,["onClick","aria-label"])]),c(p,{onClick:_=>t(o).removeFromCart(a.product.id),"name-class":"remove-cart-item",icon:"material-symbols:delete-outline-rounded",class:"cart-item__remove-from-cart","aria-label":t(T)[t(l)].ariaLabelRemoveItemFromCart},null,8,["onClick","aria-label"])]))),128))])}}}),$t=Object.assign(D(wt,[["__scopeId","data-v-e55d57f1"]]),{__name:"CartShopping"}),v={ru:{title:"Оформление заказа",email:"Почта",phone:"Телефон",checkbox:"Согласен с условиями обработки данных",total:"Итого:",checkout:"Оформить",submitting:"Оформляем...",showSuccessMessage:"Заказ оформлен!"},en:{title:"Placing an order",email:"Email",phone:"Phone",checkbox:"I agree with the terms of data processing",total:"Total:",checkout:"Checkout",submitting:"We are making out...",showSuccessMessage:"The order has been placed!"},be:{title:"Афармленне замовы",email:"Пошта",phone:"Тэлефон",checkbox:"Згодзен з умовамі апрацоўкі дадзеных",total:"Усяго:",checkout:"Аформіць",submitting:"Афармляем...",showSuccessMessage:"Заказ аформлены!"}},xt=rt("order",()=>{const{create:C}=A(),o=L();return{createOrder:async(l,y)=>{try{const g={items:o.items,total:o.totalPrice,email:l,phone:y,statusOrders:"new"},n=await C("orders",g);return o.clearCart(),n}catch(g){throw console.error("Ошибка при создании заказа:",g),g}}}}),Ct={class:"order-form__title"},St={class:"order-form__label",for:"email"},It=["disabled"],Lt={class:"order-form__label",for:"phone"},Tt=["disabled"],Ot={class:"order-form__checkbox-label"},Nt=["disabled"],qt={class:"order-form__conditions"},Ft={class:"order-form__total"},Bt={"aria-live":"polite",role:"status","aria-atomic":"true"},Mt=M({__name:"OrderForm",emits:["order-success"],setup(C,{emit:o}){const{currentLocale:i}=S(),l=L(),y=xt(),g=o,n=x(!1),s=nt({email:"",phone:"",agree:!1}),f=async()=>{var p;if(!(!s.agree||!s.email||!s.phone)){n.value=!0;try{const d=await y.createOrder(s.email,s.phone);g("order-success",(p=d.data.items[0])==null?void 0:p.product.id),s.email="",s.phone="",s.agree=!1}catch(d){alert("Ошибка:"+d)}finally{n.value=!1}}};return(p,d)=>{const $=F,a=B;return m(),h("div",{class:P(["order-form",{"order-form_disabled":t(n)||t(l).totalItems===0}])},[e("h3",Ct,r(t(v)[t(i)].title),1),e("form",{onSubmit:it(f,["prevent"]),class:"order-form__form"},[e("label",St,r(t(v)[t(i)].email),1),O(e("input",{"onUpdate:modelValue":d[0]||(d[0]=_=>t(s).email=_),type:"email",id:"email",disabled:t(n)||t(l).totalItems===0,placeholder:"your@email.com",class:"order-form__input"},null,8,It),[[R,t(s).email]]),e("label",Lt,r(t(v)[t(i)].phone)+"* ",1),O(e("input",{"onUpdate:modelValue":d[1]||(d[1]=_=>t(s).phone=_),type:"tel",required:"",disabled:t(n)||t(l).totalItems===0,id:"phone",placeholder:"+375(00) 000-00-00",class:"order-form__input"},null,8,Tt),[[R,t(s).phone]]),e("label",Ot,[O(e("input",{"onUpdate:modelValue":d[2]||(d[2]=_=>t(s).agree=_),type:"checkbox",required:"",disabled:t(n)||t(l).totalItems===0,class:"order-form__checkbox"},null,8,Nt),[[lt,t(s).agree]]),e("span",qt,r(t(v)[t(i)].checkbox),1)]),c($,{size:"large",type:"submit",disabled:t(n)||t(l).totalItems===0,label:t(n)?t(v)[t(i)].submitting:t(v)[t(i)].checkout,class:"order-form__btn"},null,8,["disabled","label"])],32),e("div",Ft,[e("b",null,r(t(v)[t(i)].total),1),e("strong",Bt,[c(a,{name:"my-icon:icon-by-regular"}),I(" "+r(t(V)(t(l).totalPrice)),1)])])],2)}}}),Pt=Object.assign(D(Mt,[["__scopeId","data-v-772a6573"]]),{__name:"OrderForm"}),Dt={ru:{title:"Заказ #{orderId} успешно сформирован!",notice:"В ближайшее время с вами свяжутся.",thanks:"Благодарим за заказ!"},en:{title:"Order #{orderId} successfully placed!",notice:"We will contact you shortly.",thanks:"Thank you for your order!"},be:{title:"Заказ #{orderId} паспяхова створаны!",notice:"У бліжэйшы час з вамі звяжуцца.",thanks:"Дзякуем за заказ!"}},Vt={class:"visually-hidden",id:"cart-page"},zt={key:0,class:"cart-page__cart-empty cart-empty"},Ut={class:"cart-empty__body"},Et={class:"cart-empty__list"},Qt={class:"cart-empty__item"},jt={class:"cart-empty__item"},Rt={class:"cart-empty__item"},At={class:"cart-empty__item"},Wt={class:"cart-empty__image"},Gt={class:"cart-empty__text"},Ht={class:"cart-page__body"},Jt={class:"cart-page__cart-items"},Kt={class:"cart-page__title"},Xt={"aria-atomic":"true","aria-live":"polite",role:"status",class:"cart-page__total"},Yt={key:0,class:"cart-page__discount-card discount-card"},Zt={class:"discount-card__promotional"},te={class:"discount-card__title"},ee={class:"discount-card__price"},ae=M({__name:"cartshopping",setup(C){const{currentLocale:o}=S(),i=L(),{goBack:l}=gt(),{find:y}=A(),g=K();_t({title:b[o.value].title,ogTitle:b[o.value].title,description:b[o.value].description,ogDescription:b[o.value].description});const{data:n}=ct(`product-discount-${o.value}`,async()=>{const a=await y("products",{filters:{locale:o.value,isDiscount:!0},pagination:{pageSize:100},populate:{image:{fields:["alternativeText","url"]},subcategory:{fields:["name","slug"],populate:{category:{fields:["name","slug"]}}}}});if(!a.data||a.data.length===0)throw dt({statusCode:404,statusMessage:"Product - Not Found"});return a.data}),s=x(!1),f=x(""),p=x(""),d=x(""),$=a=>{const _=Dt[o.value];f.value=_.title.replace("{orderId}",a.toString()),p.value=_.notice,d.value=_.thanks,s.value=!0,setTimeout(()=>{s.value=!1},7e3)};return G(()=>{i.loadCart()}),(a,_)=>{const Y=F,k=W,Z=$t,tt=B,et=ut,at=X,ot=pt,st=Pt;return m(),h("section",{class:P(["cart-page",{"cart-page_empty":t(i).totalItems===0}]),"aria-labelledby":"cart-page"},[e("h1",Vt,r(t(b)[t(o)].visuallyHidden),1),c(Y,{onClick:t(l),icon:"material-symbols:arrow-back","aria-label":"go back","name-class":"go-forward-back",class:"cart-page__go-back"},null,8,["onClick"]),t(i).totalItems===0?(m(),h("div",zt,[e("div",Ut,[e("ul",Et,[e("li",Qt,[c(k,{src:"image/valberg_new-removebg-preview.png",alt:"image",format:"webp",width:"122"})]),e("li",jt,[c(k,{src:"image/aiko_new_1-removebg-preview.png",alt:"image",format:"webp",width:"122"})]),e("li",Rt,[c(k,{src:"image/praktik_profi_rgb-removebg-preview.png",alt:"image",format:"webp",width:"122"})]),e("li",At,[c(k,{src:"image/praktik-home_rgb-removebg-preview.png",alt:"image",format:"webp",width:"122"})])])]),e("div",Wt,[c(k,{src:"image/cart-empty-img.png",alt:"image",format:"webp",width:"286"}),e("span",Gt,r(t(b)[t(o)].cartEmpty),1)])])):w("",!0),e("div",Ht,[e("div",Jt,[e("h2",Kt,r(t(b)[t(o)].title),1),e("span",Xt,[I(r(t(b)[t(o)].total)+" ",1),e("b",null,r(t(i).totalItems),1)]),c(Z,{class:"cart-page__products"}),t(i).totalItems===0?(m(),h("ul",Yt,[(m(!0),h(H,null,J(t(n),u=>{var z,U,E;return m(),h("li",{class:"discount-card__item",key:u.id},[e("span",Zt,[c(tt,{name:"mdi:discount-outline"}),I(" "+r(t(mt)[t(o)].discount),1)]),c(et,{product:u,class:"discount-card__in-stock"},null,8,["product"]),c(at,{class:"discount-card__link",to:`/${t(o)}/${(U=(z=u==null?void 0:u.subcategory)==null?void 0:z.category)==null?void 0:U.slug}/${(E=u==null?void 0:u.subcategory)==null?void 0:E.slug}/${u.slug}`},{default:q(()=>{var Q,j;return[(Q=u.image)!=null&&Q.length?(m(),N(k,{key:0,class:"discount-card__image",src:`${t(g).public.strapi.url}${(j=u.image[0])==null?void 0:j.url}`,alt:u.name,loading:"lazy",decoding:"async",width:"240",height:"180"},null,8,["src","alt"])):w("",!0)]}),_:2},1032,["to"]),e("h3",te,r(u.name),1),e("span",ee,r(t(V)(u.price)),1)])}),128))])):w("",!0),t(s)?(m(),N(ot,{key:1,type:"success",onClose:_[0]||(_[0]=u=>s.value=!1)},{default:q(()=>[e("div",null,[e("p",null,r(t(f)),1),e("p",null,r(t(p)),1),e("p",null,r(t(d)),1)])]),_:1})):w("",!0)]),c(st,{class:"cart-page__order-form",onOrderSuccess:$})])],2)}}}),ue=D(ae,[["__scopeId","data-v-f2c0f725"]]);export{ue as default};
