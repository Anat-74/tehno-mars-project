import{_ as a}from"./Loader-B4Hlrbmz.mjs";import{u as e,b as r,_ as t}from"./useStrapi-BZjfg20M.mjs";import{_ as l,v as s,f as o,u as n,c as u,a as i,b as d,d as c}from"./server.mjs";import{_ as m}from"./NuxtImg-BJWs2ZwM.mjs";import{_ as g}from"./Pagination-7_m9JRkD.mjs";import{u as f}from"./useGoToForwardOrBack-ClO4dsvn.mjs";import{u as p}from"./index-CpWcOAco.mjs";import{C as v,K as b,G as y,H as _}from"../routes/renderer.mjs";import"../nitro/nitro.mjs";import"node:buffer";import"node:timers";import"node:events";import"node:process";import"node:util";import"../_/shared.esm-bundler.mjs";const h=s.defineComponent({__name:"index",__ssrInlineRender:!0,setup(l){var h,x;const{find:w}=e(),$=o(),{categorySlug:k}=$.params,{currentLocale:C}=n(),{goBack:j,goForward:S}=f(),B=d(),N=s.ref($.query.page?+$.query.page:1),{data:q,pending:z,error:F}=p(`category-${C.value}-${k}`,(async()=>{const a=await w("categories",{filters:{slug:{$eq:k},locale:C.value},fields:["id","name"]});if(!a.data||0===a.data.length)throw u({statusCode:404,statusMessage:"subcategory - Not Found"});return a.data[0]})),{data:G,pending:L,refresh:I}=p(`subcategories-${k}-${N.value}`,(async()=>{if(!q.value)return null;return await w("subcategories",{filters:{category:q.value.id,locale:C.value},populate:{image:{fields:["alternativeText","url"]}},pagination:{page:N.value,pageSize:12}})}),{watch:[N,q]}),M=s.computed((()=>z.value||L.value)),O=s.computed((()=>{var a,e,r;return(null==(r=null==(e=null==(a=G.value)?void 0:a.meta)?void 0:e.pagination)?void 0:r.pageCount)||1}));return s.watch((()=>$.query.page),(a=>{N.value=a?+a:1,I()})),i({title:(null==(h=q.value)?void 0:h.name)||"",description:(null==(x=q.value)?void 0:x.name)||""}),s.watch(q,(a=>{a&&i({title:a.name,description:a.name})})),(e,l,o,n)=>{var u,i,d,f;const p=a,h=t,x=c,w=m,z=g;l("\x3c!--[--\x3e"),l(v(p,{style:s.unref(M)?null:{display:"none"},class:"loader"},null,o)),l(`<section style="${b(s.unref(M)?{display:"none"}:null)}" class="sub-category" aria-labelledby="sub-category" data-v-3db18f15><div class="sub-category__buttons" data-v-3db18f15>`),l(v(h,{onClick:s.unref(j),icon:"material-symbols:arrow-back","aria-label":s.unref(r)[s.unref(C)].ariaLabelGoBack,"name-class":"go-forward-back"},null,o)),l(v(h,{onClick:s.unref(S),icon:"material-symbols:arrow-forward","aria-label":s.unref(r)[s.unref(C)].ariaLabelGoForward,"name-class":"go-forward-back"},null,o)),l(`</div><h1 class="sub-category__category-title" data-v-3db18f15>${y(null==(u=s.unref(q))?void 0:u.name)}</h1>`),(null==(d=null==(i=s.unref(G))?void 0:i.data)?void 0:d.length)?(l('<ul class="sub-category__list" data-v-3db18f15>\x3c!--[--\x3e'),_(s.unref(G).data,(a=>{l('<li class="sub-category__item" data-v-3db18f15>'),l(v(x,{class:"sub-category__link",to:`/${s.unref(C)}/${s.unref(k)}/${a.slug}`},{default:s.withCtx(((e,r,t,l)=>{var o,n,u,i;if(!r)return[s.createVNode("h2",{class:"sub-category__title"},s.toDisplayString(a.name),1),(null==(u=a.image)?void 0:u.length)?(s.openBlock(),s.createBlock(w,{key:0,src:`${s.unref(B).public.strapi.url}${null==(i=a.image[0])?void 0:i.url}`,alt:a.name,class:"sub-category__image",format:"webp",loading:"lazy",decoding:"async",width:"240",height:"180"},null,8,["src","alt"])):s.createCommentVNode("",!0)];r(`<h2 class="sub-category__title" data-v-3db18f15${l}>${y(a.name)}</h2>`),(null==(o=a.image)?void 0:o.length)?r(v(w,{src:`${s.unref(B).public.strapi.url}${null==(n=a.image[0])?void 0:n.url}`,alt:a.name,class:"sub-category__image",format:"webp",loading:"lazy",decoding:"async",width:"240",height:"180"},null,t,l)):r("\x3c!----\x3e")})),_:2},o)),l("</li>")})),l("\x3c!--]--\x3e</ul>")):l("\x3c!----\x3e"),l(v(z,{class:"sub-category__pagination",page:s.unref(N),pageCount:s.unref(O),routeName:(null==(f=s.unref($).name)?void 0:f.toString())||""},null,o)),l("</section>"),s.unref(F)?l(`<div class="error" data-v-3db18f15>${y(s.unref(F).message)}</div>`):l("\x3c!----\x3e"),l("\x3c!--]--\x3e")}}}),x=h.setup;h.setup=(a,e)=>{const r=s.useSSRContext();return(r.modules||(r.modules=new Set)).add("pages/[lang]/[categorySlug]/index.vue"),x?x(a,e):void 0};const w=l(h,[["__scopeId","data-v-3db18f15"]]);export{w as default};
//# sourceMappingURL=index-IHTkLt8W.mjs.map
