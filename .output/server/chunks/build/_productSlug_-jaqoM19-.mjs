import{_ as e}from"./Loader-B4Hlrbmz.mjs";import{u as t,b as r,_ as n}from"./useStrapi-BZjfg20M.mjs";import{u as a,_ as o}from"./index-CpWcOAco.mjs";import{_ as s,f as i}from"./ProductStatus-c-DMWgt0.mjs";import{_ as l}from"./AppNotification-D1x78Gdr.mjs";import{_ as u,v as c,f as d,u as p,g as f,c as m,b as v,a as g}from"./server.mjs";import{_ as h}from"./NuxtImg-BJWs2ZwM.mjs";import{N as y,O as b,P as _,Q as w,i as x}from"../nitro/nitro.mjs";import{v as C}from"./visuallyHidden-CsncTQkD.mjs";import{u as S}from"./useCartStore-iBuykjA7.mjs";import{u as j}from"./useIsInCart-DgPYkn2k.mjs";import{u as T}from"./useGoToForwardOrBack-ClO4dsvn.mjs";import{C as $,G as k,H as M,M as O,D as A,N as R}from"../routes/renderer.mjs";import"../_/shared.esm-bundler.mjs";import"node:buffer";import"node:timers";import"node:events";import"node:process";import"node:util";const D={ru:{successMessage:"Ссылка скопирована в буфер обмена!",errorMessage:"Не удалось скопировать ссылку"},en:{successMessage:"Link copied to clipboard!",errorMessage:"Failed to copy link"},be:{successMessage:"Спасылка скапіявана ў буфер абмену!",errorMessage:"Не ўдалося скапіяваць спасылку"}};const I=c.defineComponent({__name:"ShareButton",__ssrInlineRender:!0,setup(e){const{currentLocale:t}=p(),{show:a,type:o,content:s,showNotification:i}=function(){const e=c.ref(!1),t=c.ref("success"),r=c.ref("");return{show:e,type:t,content:r,showNotification:(n,a="success",o=3e3)=>{r.value=n,t.value=a,e.value=!0,o>0&&setTimeout((()=>{e.value=!1}),o)}}}(),u=d(),f=v(),m=D[t.value],copyLink=async()=>{const e=`${f.public.siteUrl}${u.fullPath.split("?")[0]}`;try{await(void 0).clipboard.writeText(e),i(m.successMessage)}catch(e){console.error("Ошибка копирования:",e),i(m.errorMessage)}};return(e,i,u,d)=>{const p=n,f=l;i(`<div${A(d)} data-v-6468e36d>`),i($(p,{onClick:copyLink,icon:"ph:link-simple-bold","name-class":"share","aria-label":c.unref(r)[c.unref(t)].ariaLabelCopyLink},null,u)),c.unref(a)?i($(f,{type:c.unref(o),onClose:e=>a.value=!1},{default:c.withCtx(((e,t,r,n)=>{if(!t)return[c.createTextVNode(c.toDisplayString(c.unref(s)),1)];t(`${k(c.unref(s))}`)})),_:1},u)):i("\x3c!----\x3e"),i("</div>")}}}),B=I.setup;I.setup=(e,t)=>{const r=c.useSSRContext();return(r.modules||(r.modules=new Set)).add("components/ShareButton.vue"),B?B(e,t):void 0};const P=Object.assign(u(I,[["__scopeId","data-v-6468e36d"]]),{__name:"ShareButton"}),N=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","label","legend","li","link","main","map","mark","math","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rb","rp","rt","rtc","ruby","s","samp","script","section","select","slot","small","source","span","strong","style","sub","summary","sup","svg","table","tbody","td","template","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr"],U=["p","h1","h2","h3","h4","h5","h6","li"];function isTag(e,t){return e.type===t||("object"==typeof e.type&&e.type.tag===t||e.tag===t)}function isText(e){return isTag(e,"text")||isTag(e,Symbol.for("v-txt"))}function nodeChildren(e){var t;return Array.isArray(e.children)||"string"==typeof e.children?e.children:"function"==typeof(null==(t=e.children)?void 0:t.default)?e.children.default():[]}function nodeTextContent(e){if(!e)return"";if(Array.isArray(e))return e.map(nodeTextContent).join("");if(isText(e))return e.value||e.children||"";const t=nodeChildren(e);return Array.isArray(t)?t.map(nodeTextContent).filter(Boolean).join(""):""}function unwrap(e,t=[]){if(Array.isArray(e))return e.flatMap((e=>unwrap(e,t)));let r=e;return t.some((t=>"*"===t||isTag(e,t)))&&(r=nodeChildren(e)||e,!Array.isArray(r)&&U.some((t=>isTag(e,t)))&&(r=[r])),r}function _flatUnwrap(e,t=[]){return e=Array.isArray(e)?e:[e],t.length?e.flatMap((e=>_flatUnwrap(unwrap(e,[t[0]]),t.slice(1)))).filter((e=>!(isText(e)&&""===nodeTextContent(e).trim()))):e}function flatUnwrap(e,t=[]){return"string"==typeof t&&(t=t.split(/[,\s]/).map((e=>e.trim())).filter(Boolean)),t.length?_flatUnwrap(e,t).reduce(((e,t)=>(isText(t)?"string"==typeof e[e.length-1]?e[e.length-1]+=t.children:e.push(t.children):e.push(t),e)),[]):e}const L="default",q=/^@|^v-on:/,H=/^:|^v-bind:/,W=/^v-model/,G=["select","textarea","input"],K=["math","svg"],E=Object.fromEntries(["p","a","blockquote","code","pre","code","em","h1","h2","h3","h4","h5","h6","hr","img","ul","ol","li","strong","table","thead","tbody","td","th","tr","script"].map((e=>[e,`prose-${e}`]))),F=c.defineComponent({name:"MDCRenderer",props:{body:{type:Object,required:!0},data:{type:Object,default:()=>({})},class:{type:[String,Object],default:void 0},tag:{type:[String,Boolean],default:void 0},prose:{type:Boolean,default:void 0},components:{type:Object,default:()=>({})},unwrap:{type:[Boolean,String],default:!1}},async setup(e){var t,r,n;const a=null==(r=null==(t=c.getCurrentInstance())?void 0:t.appContext)?void 0:r.app,o=null==a?void 0:a.$nuxt,s=(null==o?void 0:o.$route)||(null==o?void 0:o._route),{mdc:i}=(null==(n=null==o?void 0:o.$config)?void 0:n.public)||{},l=c.computed((()=>{var t,r,n,a;return{...(null==(t=null==i?void 0:i.components)?void 0:t.prose)&&!1!==e.prose?E:{},...(null==(r=null==i?void 0:i.components)?void 0:r.map)||{},...c.toRaw((null==(a=null==(n=e.data)?void 0:n.mdc)?void 0:a.components)||{}),...e.components}})),u=c.computed((()=>{var t;const r=((null==(t=e.body)?void 0:t.children)||[]).map((e=>e.tag||e.type)).filter((e=>!N.includes(e)));return Array.from(new Set(r)).sort().join(".")})),d=c.reactive({...e.data});return c.watch((()=>e.data),(e=>{Object.assign(d,e)})),await async function(e,t){if(!e)return;const r=Array.from(new Set(loadComponents(e,t)));function loadComponents(e,t){const r=e.tag;if("text"===e.type||"binding"===r||"comment"===e.type)return[];const n=findMappedTag(e,t.tags);if(isUnresolvableTag(n))return[];const a=[];"root"===e.type||N.includes(n)||a.push(n);for(const r of e.children||[])a.push(...loadComponents(r,t));return a}await Promise.all(r.map((async e=>{if((null==e?void 0:e.render)||(null==e?void 0:e.ssrRender)||(null==e?void 0:e.__ssrInlineRender))return;const t=resolveComponentInstance(e);(null==t?void 0:t.__asyncLoader)&&!t.__asyncResolved&&await t.__asyncLoader()})))}(e.body,{tags:l.value}),{tags:l,contentKey:u,route:s,runtimeData:d,updateRuntimeData:function(e,t){const r=e.split(".").length-1;return e.split(".").reduce(((e,n,a)=>a==r&&e?(e[n]=t,e[n]):"object"==typeof e?e[n]:void 0),d)}}},render(e){var t,r;const{tags:n,tag:a,body:o,data:s,contentKey:i,route:l,unwrap:u,runtimeData:d,updateRuntimeData:p}=e;if(!o)return null;const f={...s,tags:n,$route:l,runtimeData:d,updateRuntimeData:p},m=!1!==a?resolveComponentInstance(a||(null==(t=f.component)?void 0:t.name)||f.component||"div"):void 0;return m?c.h(m,{...null==(r=f.component)?void 0:r.props,class:e.class,...this.$attrs,key:i},{default:defaultSlotRenderer}):null==defaultSlotRenderer?void 0:defaultSlotRenderer();function defaultSlotRenderer(){const e=_renderSlots(o,c.h,{documentMeta:f,parentScope:f,resolveComponent:resolveComponentInstance});return(null==e?void 0:e.default)?u?flatUnwrap(e.default(),"string"==typeof u?u.split(" "):["*"]):e.default():null}}});function _renderNode(e,t,r,n){const{documentMeta:a,parentScope:o,resolveComponent:s}=r;if("text"===e.type)return t(c.Text,e.value);if("comment"===e.type)return t(c.Comment,null,e.value);const i=e.tag,l=findMappedTag(e,a.tags);if("binding"===e.tag)return function(e,t,r,n={}){var a,o;const s={...r.runtimeData,...n,$document:r,$doc:r},i=/\.|\[(\d+)\]/,l=null==(a=e.props)?void 0:a.value.trim().split(i).filter(Boolean),u=l.reduce(((e,t)=>{if(e&&t in e)return"function"==typeof e[t]?e[t]():e[t]}),s),d=null==(o=e.props)?void 0:o.defaultValue;return t(c.Text,u??d??"")}(e,t,a,o);const u=isUnresolvableTag(l)?e=>e:s;if("script"===l)return t("pre",{class:"script-to-pre"},"<script>\n"+nodeTextContent(e)+"\n<\/script>");const d=u(l);"object"==typeof d&&(d.tag=i);const p=function(e,t){const{tag:r="",props:n={}}=e;return Object.keys(n).reduce((function(e,a){if("__ignoreMap"===a)return e;const o=n[a];if(W.test(a))return function(e,t,r,n,{native:a}){var o;const s=(null==(o=e.match(/^v-model:([^=]+)/))?void 0:o[1])||"modelValue",i=a?"onInput":`onUpdate:${s}`;return r[a?"value":s]=evalInContext(t,n.runtimeData),r[i]=e=>{var r;n.updateRuntimeData(t,a?null==(r=e.target)?void 0:r.value:e)},r}(a,o,e,t,{native:G.includes(r)});if("v-bind"===a)return function(e,t,r,n){const a=evalInContext(t,n);return r=Object.assign(r,a),r}(0,o,e,t);if(q.test(a))return function(e,t,r,n){return e=e.replace(q,""),r.on=r.on||{},r.on[e]=()=>evalInContext(t,n),r}(a,o,e,t);if(H.test(a))return function(e,t,r,n){return e=e.replace(H,""),r[e]=evalInContext(t,n),r}(a,o,e,t);const{attribute:s}=_(w,a);return Array.isArray(o)&&o.every((e=>"string"==typeof e))?(e[s]=o.join(" "),e):(e[s]=o,e)}),{})}(e,a);return n&&(p.key=n),t(d,p,_renderSlots(e,t,{documentMeta:a,parentScope:{...o,...p},resolveComponent:u}))}function _renderSlots(e,t,r){const{documentMeta:n,parentScope:a,resolveComponent:o}=r,s=(e.children||[]).reduce(((e,t)=>{if(!function(e){return"template"===e.tag}(t))return e[L].children.push(t),e;const r=function(e){let t="";for(const r of Object.keys(e.props||{}))if(r.startsWith("#")||r.startsWith("v-slot:")){t=r.split(/[:#]/,2)[1];break}return t||L}(t);return e[r]=e[r]||{props:{},children:[]},"element"===t.type&&(e[r].props=t.props,e[r].children.push(...t.children||[])),e}),{[L]:{props:{},children:[]}}),i=Object.entries(s).reduce(((e,[r,{props:s,children:i}])=>i.length?(e[r]=(e={})=>{const r=(l=e,Object.keys(s||{}).reduce(((e,t)=>{const r=function(e,t){return t.split(".").reduce(((e,t)=>e&&e[t]),e)}(l,t);return void 0!==r&&(e[t]=r),e}),{}));var l;let u=i.map(((e,s)=>{var i;return _renderNode(e,t,{documentMeta:n,parentScope:{...a,...r},resolveComponent:o},String((null==(i=e.props)?void 0:i.key)||s))}));return(null==s?void 0:s.unwrap)&&(u=flatUnwrap(u,s.unwrap)),function(e){const t=[];for(const r of e){const e=t[t.length-1];r.type===c.Text&&(null==e?void 0:e.type)===c.Text?e.children=e.children+r.children:t.push(r)}return t}(u)},e):e),{});return i}const resolveComponentInstance=e=>{if("string"==typeof e){if(N.includes(e))return e;const t=c.resolveComponent(y(e),!1);return e&&"AsyncComponentWrapper"!==(null==t?void 0:t.name)?"string"==typeof t?t:"setup"in t?c.defineAsyncComponent((()=>new Promise((e=>e(t))))):t:t}return e};function evalInContext(e,t){const r=e.split(".").reduce(((e,t)=>"object"==typeof e?e[t]:void 0),t);return void 0===r?x(e):r}function isUnresolvableTag(e){return K.includes(e)}function findMappedTag(e,t){var r;const n=e.tag;return n&&void 0===(null==(r=e.props)?void 0:r.__ignoreMap)&&(t[n]||t[y(n)]||t[b(e.tag)])||n}const J=F.setup;F.setup=(e,t)=>{const r=c.useSSRContext();return(r.modules||(r.modules=new Set)).add("../node_modules/@nuxtjs/mdc/dist/runtime/components/MDCRenderer.vue"),J?J(e,t):void 0};const V=Object.assign(F,{__name:"MDCRenderer"}),z={__name:"MDC",__ssrInlineRender:!0,props:{tag:{type:[String,Boolean],default:"div"},value:{type:[String,Object],required:!0},excerpt:{type:Boolean,default:!1},parserOptions:{type:Object,default:()=>({})},class:{type:[String,Array,Object],default:""},unwrap:{type:[Boolean,String],default:!1},cacheKey:{type:String,default:void 0},partial:{type:Boolean,default:!0}},async setup(e){let t,r;const n=e,o=c.computed((()=>n.cacheKey??function(e){"string"!=typeof e&&(e=JSON.stringify(e||""));let t=0;for(let r=0;r<e.length;r++){t=(t<<6)-t+e.charCodeAt(r),t|=0}return`mdc-${0===t?"0000":t.toString(36)}-key`}(n.value))),{data:s,refresh:i,error:l}=([t,r]=c.withAsyncContext((async()=>a(o.value,(async()=>{var e,t;if("string"!=typeof n.value)return n.value;const{parseMarkdown:r}=await import("./index-HEoSOl_T.mjs");return await r(n.value,{...n.parserOptions,toc:!n.partial&&(null==(e=n.parserOptions)?void 0:e.toc),contentHeading:!n.partial&&(null==(t=n.parserOptions)?void 0:t.contentHeading)})}),"$R23qlhow_i"))),t=await t,r(),t),u=c.computed((()=>{var e,t;return n.excerpt?null==(e=s.value)?void 0:e.excerpt:null==(t=s.value)?void 0:t.body}));return c.watch((()=>n.value),(()=>{i()})),(e,t,r,a)=>{var o,i,d,p;const f=V;R(e.$slots,"default",{data:null==(o=c.unref(s))?void 0:o.data,body:null==(i=c.unref(s))?void 0:i.body,toc:null==(d=c.unref(s))?void 0:d.toc,excerpt:null==(p=c.unref(s))?void 0:p.excerpt,error:c.unref(l)},(()=>{var e;u.value?t($(f,{tag:n.tag,class:n.class,body:u.value,data:null==(e=c.unref(s))?void 0:e.data,unwrap:n.unwrap},null,r)):t("\x3c!----\x3e")}),t,r)}}},Q=z.setup;z.setup=(e,t)=>{const r=c.useSSRContext();return(r.modules||(r.modules=new Set)).add("../node_modules/@nuxtjs/mdc/dist/runtime/components/MDC.vue"),Q?Q(e,t):void 0};const Z={ru:{title:"Характеристики"},en:{title:"Characteristics"},be:{title:"Характарыстыкі"}},Y=c.defineComponent({__name:"ProductCharacteristics",__ssrInlineRender:!0,props:{specs:{type:Array,default:()=>[]}},setup(e){const{currentLocale:t}=p();return(r,n,a,o)=>{var s;(null==(s=e.specs)?void 0:s.length)?(n(`<div${A(c.mergeProps({class:"product-characteristics"},o))} data-v-0722a6ae><h3 class="product-characteristics__title" data-v-0722a6ae>${k(c.unref(Z)[c.unref(t)].title)}</h3><table class="product-characteristics__table" data-v-0722a6ae><tbody data-v-0722a6ae>\x3c!--[--\x3e`),M(e.specs,((e,t)=>{n(`<tr class="product-characteristics__row" data-v-0722a6ae><td class="product-characteristics__param" data-v-0722a6ae>${k(e.param)}</td><td class="product-characteristics__value" data-v-0722a6ae>${k(e.value)}</td></tr>`)})),n("\x3c!--]--\x3e</tbody></table></div>")):n("\x3c!----\x3e")}}}),X=Y.setup;Y.setup=(e,t)=>{const r=c.useSSRContext();return(r.modules||(r.modules=new Set)).add("components/ProductCharacteristics.vue"),X?X(e,t):void 0};const ee=Object.assign(u(Y,[["__scopeId","data-v-0722a6ae"]]),{__name:"ProductCharacteristics"}),te=c.defineComponent({__name:"[productSlug]",__ssrInlineRender:!0,setup(l){var u,y;const{find:b}=t(),_=d(),w=S(),{isInCart:x}=j(),{categorySlug:A,subcategorySlug:R,productSlug:D}=_.params,I=v(),{currentLocale:B}=p(),{goBack:N}=T(),U=f("currentImage",(()=>null)),{data:L,error:q,status:H}=a(`product-${B.value}-${D}`,(async()=>{var e,t;const r=await b("products",{filters:{slug:{$eq:D},locale:B.value},populate:{image:{fields:["id","alternativeText","url"]}}});if(!r.data||0===r.data.length)throw m({statusCode:404,message:"Product Not Found"});const n=r.data[0],a=null==(t=null==(e=null==n?void 0:n.image)?void 0:e[0])?void 0:t.url;return a&&(U.value=`${I.public.strapi.url}${a}`),n})),W=c.computed((()=>{var e;try{return JSON.parse((null==(e=L.value)?void 0:e.characteristics)||"[]")}catch{return[]}}));g({title:null==(u=L.value)?void 0:u.name,description:null==(y=L.value)?void 0:y.description}),c.watch(L,(e=>{e&&g({title:e.name,description:e.description})}));return(t,a,l,u)=>{var d;const p=e,f=n,m=o,v=s,g=P,y=h,b=z,_=ee;a("\x3c!--[--\x3e"),"pending"===c.unref(H)?a($(p,{class:"loader"},null,l)):a("\x3c!----\x3e"),c.unref(L)?(a(`<section aria-labelledby="product-description" class="product-review" data-v-b11ea226><h1 class="visually-hidden" id="product-description" data-v-b11ea226>${k(c.unref(C)[c.unref(B)].sectionProductSlugTitle)}</h1><div class="product-review__wrapper-left wrapper-left" data-v-b11ea226><div class="wrapper-left__row-top" data-v-b11ea226>`),a($(f,{class:"wrapper-left__go-back",onClick:c.unref(N),icon:"material-symbols:arrow-back","aria-label":c.unref(r)[c.unref(B)].ariaLabelGoBack,"name-class":"go-forward-back"},null,l)),c.unref(L).isDiscount?a($(m,{class:"wrapper-left__discount-icon",name:"mdi:discount"},null,l)):a("\x3c!----\x3e"),a($(v,{product:c.unref(L),class:"wrapper-left__in-stock"},null,l)),a($(g,{class:"wrapper-left__share"},null,l)),a("</div>"),c.unref(U)?a($(y,{src:c.unref(U),alt:c.unref(L).name,width:"580",height:"436",class:"wrapper-left__image"},null,l)):a("\x3c!----\x3e"),(null==(d=c.unref(L).image)?void 0:d.length)?(a('<ul class="wrapper-left__thumbnails" data-v-b11ea226>\x3c!--[--\x3e'),M(c.unref(L).image,((e,t)=>{var r;a(`<li class="${O(["wrapper-left__thumbnail",{"wrapper-left__thumbnail_active":(r=e.url,c.computed((()=>U.value===`${I.public.strapi.url}${r}`))).value}])}" data-v-b11ea226>`),a($(y,{src:`${c.unref(I).public.strapi.url}${e.url}`,alt:`${c.unref(L).name} - Image ${t+1}`,width:"133",height:"100",class:"wrapper-left__thumbnail-image"},null,l)),a("</li>")})),a("\x3c!--]--\x3e</ul>")):a("\x3c!----\x3e"),a(`</div><div class="product-review__wrapper-right wrapper-right" data-v-b11ea226><h2 class="wrapper-right__title" data-v-b11ea226>${k(c.unref(L).name)}</h2>`),a($(b,{class:"wrapper-right__description",value:c.unref(L).description},null,l)),a($(_,{specs:c.unref(W),class:"wrapper-right__characteristics"},null,l)),a(`<span class="${O(["wrapper-right__price",{"wrapper-right__price_discount":c.unref(L).isDiscount}])}" data-v-b11ea226>`),a($(m,{class:{"wrapper-right__discount-icon":c.unref(L).isDiscount},name:"my-icon:icon-by-regular"},null,l)),a(` ${k(c.unref(i)(c.unref(L).price))}</span>`),c.unref(x)(c.unref(L).id)?a($(f,{class:"subcategory-products__add-to-cart",disabled:"","name-class":"add-to-cart",icon:"emojione-v1:left-check-mark","aira-label":c.unref(r)[c.unref(B)].ariaLabelAdded},null,l)):a($(f,{onClick:e=>{return t=c.unref(L),void w.addToCart(t,A,R);var t},"name-class":"add-to-cart",label:c.unref(r)[c.unref(B)].label,class:"wrapper-right__btn"},null,l)),a("</div></section>")):c.unref(q)?a(`<span data-v-b11ea226> Error: ${k(c.unref(q).message)}</span>`):a("\x3c!----\x3e"),a("\x3c!--]--\x3e")}}}),re=te.setup;te.setup=(e,t)=>{const r=c.useSSRContext();return(r.modules||(r.modules=new Set)).add("pages/[lang]/[categorySlug]/[subcategorySlug]/[productSlug].vue"),re?re(e,t):void 0};const ne=u(te,[["__scopeId","data-v-b11ea226"]]),ae=Object.freeze(Object.defineProperty({__proto__:null,default:ne},Symbol.toStringTag,{value:"Module"}));export{U as T,ae as _,isText as a,nodeChildren as b,flatUnwrap as f,N as h,isTag as i,nodeTextContent as n,unwrap as u};
//# sourceMappingURL=_productSlug_-jaqoM19-.mjs.map
