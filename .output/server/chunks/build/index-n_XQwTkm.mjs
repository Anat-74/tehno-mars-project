import{_ as a}from"./Loader-B4Hlrbmz.mjs";import{u as e,b as r,_ as s}from"./useStrapi-BZjfg20M.mjs";import{u as t,_ as o}from"./index-CpWcOAco.mjs";import{_ as u,f as n}from"./ProductStatus-c-DMWgt0.mjs";import{_ as l,v as c,f as i,u as d,c as p,a as m,b as f,d as g}from"./server.mjs";import{_ as v}from"./NuxtImg-BJWs2ZwM.mjs";import{_ as y}from"./Pagination-7_m9JRkD.mjs";import{p as b}from"./productFilter-DxgzEXkr.mjs";import{v as _}from"./visuallyHidden-CsncTQkD.mjs";import{u as $}from"./useGoToForwardOrBack-ClO4dsvn.mjs";import{u as h}from"./useIsInCart-DgPYkn2k.mjs";import{u as x}from"./useCartStore-iBuykjA7.mjs";import{C as w,K as k,G as C,J as j,L as S,H as A,M as B}from"../routes/renderer.mjs";import{K as D}from"../_/shared.esm-bundler.mjs";import"../nitro/nitro.mjs";import"node:buffer";import"node:timers";import"node:events";import"node:process";import"node:util";const L=c.defineComponent({__name:"index",__ssrInlineRender:!0,setup(l){var L,q;const{find:I}=e(),P=i(),{currentLocale:z}=d(),{goBack:F,goForward:M}=$(),{isInCart:N}=h(),G=f(),T=x(),H=c.ref("name:asc"),J=c.ref(P.query.page?+P.query.page:1),{categorySlug:O,subcategorySlug:R}=P.params,{data:W,pending:K,error:Z}=t(`subcategory-${z.value}-${R}`,(async()=>{const a=await I("subcategories",{filters:{slug:{$eq:R},category:{slug:{$eq:O}},locale:z.value},fields:["id","name"]});if(!a.data||0===a.data.length)throw p({statusCode:404,statusMessage:"Products subCategory Not Found"});return a.data[0]})),{data:E,pending:Q,refresh:V}=t(`products-${R}-${J.value}-${H.value}`,(async()=>{if(!W.value)return null;return await I("products",{filters:{subcategory:W.value.id,locale:z.value},populate:{image:{fields:["alternativeText","url"]}},sort:H.value,pagination:{page:J.value,pageSize:12}})}),{watch:[J,H,W]}),X=c.computed((()=>K.value||Q.value)),Y=c.computed((()=>{var a,e;return(null==(e=null==(a=E.value)?void 0:a.meta)?void 0:e.pagination)?E.value.meta.pagination.pageCount:1}));c.watch((()=>P.query.page),(a=>{J.value=a?+a:1})),c.watch(H,(()=>{V()})),m({title:null==(L=W.value)?void 0:L.name,description:null==(q=W.value)?void 0:q.name}),c.watch(W,(a=>{a&&m({title:a.name,description:a.name})}));return(e,t,l,i)=>{var d,p,m;const f=a,$=s,h=o,x=u,L=g,q=v,I=y;t("\x3c!--[--\x3e"),t(w(f,{style:c.unref(X)?null:{display:"none"},class:"loader"},null,l)),t(`<section style="${k(c.unref(X)?{display:"none"}:null)}" class="subcategory-products" aria-labelledby="subcategory-products" data-v-0723f315><div class="subcategory-products__row-top" data-v-0723f315>`),t(w($,{onClick:c.unref(F),icon:"material-symbols:arrow-back","aria-label":c.unref(r)[c.unref(z)].ariaLabelGoBack,"name-class":"go-forward-back"},null,l)),t(w($,{onClick:c.unref(M),icon:"material-symbols:arrow-forward","aria-label":c.unref(r)[c.unref(z)].ariaLabelGoForward,"name-class":"go-forward-back"},null,l)),t(`<div class="subcategory-products__select-wrapper select-wrapper" data-v-0723f315><label class="visually-hidden" for="sort-subcategory-product" data-v-0723f315>${C(c.unref(b)[c.unref(z)].labelSelect)}</label><select class="subcategory-products__select select" id="sort-subcategory-product" data-v-0723f315><option class="option" disabled value="" data-v-0723f315${D(Array.isArray(c.unref(H))?j(c.unref(H),""):S(c.unref(H),""))?" selected":""}></option><option class="option" value="name:asc" data-v-0723f315${D(Array.isArray(c.unref(H))?j(c.unref(H),"name:asc"):S(c.unref(H),"name:asc"))?" selected":""}>${C(c.unref(b)[c.unref(z)].optionName)}</option><option class="option" value="price:asc" data-v-0723f315${D(Array.isArray(c.unref(H))?j(c.unref(H),"price:asc"):S(c.unref(H),"price:asc"))?" selected":""}>${C(c.unref(b)[c.unref(z)].optionPrice)}(ðŸ¡¹) </option><option class="option" value="price:desc" data-v-0723f315${D(Array.isArray(c.unref(H))?j(c.unref(H),"price:desc"):S(c.unref(H),"price:desc"))?" selected":""}>${C(c.unref(b)[c.unref(z)].optionPriceDesc)}(ðŸ¡») </option></select></div></div><h1 class="subcategory-products__subcategory-title" data-v-0723f315>${C(null==(d=c.unref(W))?void 0:d.name)}</h1><h2 class="visually-hidden" data-v-0723f315>${C(c.unref(_)[c.unref(z)].sectionSubcategorySlugList)}</h2>`),(null==(p=c.unref(E))?void 0:p.data.length)?(t('<ul class="subcategory-products__list" data-v-0723f315>\x3c!--[--\x3e'),A(c.unref(E).data,(a=>{t('<li class="subcategory-products__item" data-v-0723f315>'),a.isDiscount?t(w(h,{class:"subcategory-products__discount-icon",name:"mdi:discount"},null,l)):t("\x3c!----\x3e"),t(w(x,{product:a,class:"subcategory-products__in-stock"},null,l)),t(w(L,{class:"subcategory-products__link",to:`/${c.unref(z)}/${c.unref(O)}/${c.unref(R)}/${a.slug}`},{default:c.withCtx(((e,r,s,t)=>{var o,u,n,l;if(!r)return[(null==(n=a.image)?void 0:n.length)?(c.openBlock(),c.createBlock(q,{key:0,class:"subcategory-products__image",src:`${c.unref(G).public.strapi.url}${null==(l=a.image[0])?void 0:l.url}`,alt:a.name,loading:"lazy",decoding:"async",width:"240",height:"180"},null,8,["src","alt"])):c.createCommentVNode("",!0)];(null==(o=a.image)?void 0:o.length)?r(w(q,{class:"subcategory-products__image",src:`${c.unref(G).public.strapi.url}${null==(u=a.image[0])?void 0:u.url}`,alt:a.name,loading:"lazy",decoding:"async",width:"240",height:"180"},null,s,t)):r("\x3c!----\x3e")})),_:2},l)),t(`<div class="subcategory-products__items-bottom" data-v-0723f315><h3 class="subcategory-products__title" data-v-0723f315>${C(a.name)}</h3><span class="${B(["subcategory-products__price",{"subcategory-products__price_discount":a.isDiscount}])}" data-v-0723f315>${C(c.unref(n)(a.price))}</span>`),c.unref(N)(a.id)?t(w($,{class:"subcategory-products__add-to-cart",disabled:"","name-class":"small-add-to-cart",icon:"emojione-v1:left-check-mark","aira-label":c.unref(r)[c.unref(z)].ariaLabelAdded},null,l)):t(w($,{onClick:e=>(a=>{T.addToCart(a,O,R)})(a),class:"subcategory-products__add-to-cart","name-class":"small-add-to-cart",icon:"qlementine-icons:add-to-cart-16","aria-label":c.unref(r)[c.unref(z)].label},null,l)),t("</div></li>")})),t("\x3c!--]--\x3e</ul>")):t("\x3c!----\x3e"),c.unref(Y)>1?t(w(I,{class:"subcategory-products__pagination",page:c.unref(J),pageCount:c.unref(Y),routeName:(null==(m=c.unref(P).name)?void 0:m.toString())||""},null,l)):t("\x3c!----\x3e"),t("</section>"),c.unref(Z)?t(`<span class="error" data-v-0723f315>${C(c.unref(Z).message)}</span>`):t("\x3c!----\x3e"),t("\x3c!--]--\x3e")}}}),q=L.setup;L.setup=(a,e)=>{const r=c.useSSRContext();return(r.modules||(r.modules=new Set)).add("pages/[lang]/[categorySlug]/[subcategorySlug]/index.vue"),q?q(a,e):void 0};const I=l(L,[["__scopeId","data-v-0723f315"]]);export{I as default};
//# sourceMappingURL=index-n_XQwTkm.mjs.map
