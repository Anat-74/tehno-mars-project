import{u as e,_ as a,b as t}from"./useStrapi-BZjfg20M.mjs";import{_ as r}from"./NuxtImg-BJWs2ZwM.mjs";import{u as s,_ as l}from"./index-CpWcOAco.mjs";import{_ as o,v as n,u as i,a as c,c as u,b as d,d as m,e as f}from"./server.mjs";import{_ as p,f as _}from"./ProductStatus-c-DMWgt0.mjs";import{c as g,d as v}from"./discountProduct-CxS7GpPw.mjs";import{u as b}from"./useCartStore-iBuykjA7.mjs";import{_ as h}from"./AppNotification-D1x78Gdr.mjs";import{u as y}from"./useGoToForwardOrBack-ClO4dsvn.mjs";import{D as $,G as w,C as k,H as x,I as C,J as S}from"../routes/renderer.mjs";import{K as I}from"../_/shared.esm-bundler.mjs";import"../nitro/nitro.mjs";import"node:buffer";import"node:timers";import"node:events";import"node:process";import"node:util";const j=n.defineComponent({__name:"CartShopping",__ssrInlineRender:!0,setup(e){const s=b(),o=d(),{currentLocale:c}=i();return(e,u,d,f)=>{const p=l,v=a,b=m,h=r;u(`<ul${$(n.mergeProps({class:"cart-item"},f))} data-v-e55d57f1>\x3c!--[--\x3e`),x(n.unref(s).items,(e=>{var a;u('<li class="cart-item__item" data-v-e55d57f1>'),e.product.originalLocale!==n.unref(c)?(u('<div class="cart-item__locale-warning" data-v-e55d57f1>'),u(k(p,{name:"mdi:alert"},null,d)),u(`<span data-v-e55d57f1>${w(n.unref(g)[n.unref(c)].warningLocale)}</span>`),u(k(v,{label:e.product.originalLocale,"name-class":"switch-locale-cart",onClick:a=>(e=>{const{switchLocale:a}=i();a(e)})(e.product.originalLocale)},null,d)),u("</div>")):u("\x3c!----\x3e"),e.product.isDiscount?u(k(p,{class:"cart-item__discount-icon",name:"mdi:discount"},null,d)):u("\x3c!----\x3e"),u(`<h3 class="cart-item__title" data-v-e55d57f1>${w(e.product.name)}</h3>`),u(k(b,{to:(a=e.product,`/${c.value}/${a.categorySlug}/${a.subcategorySlug}/${a.slug}`),class:["cart-item__link",{"cart-item__link_disabled":e.product.originalLocale!==n.unref(c)}]},{default:n.withCtx(((a,t,r,s)=>{if(!t)return[n.createVNode(h,{class:"cart-item__image",src:`${n.unref(o).public.strapi.url}${e.product.image}`,alt:e.product.name,format:"webp",loading:"lazy",decoding:"async",width:"144",height:"108"},null,8,["src","alt"])];t(k(h,{class:"cart-item__image",src:`${n.unref(o).public.strapi.url}${e.product.image}`,alt:e.product.name,format:"webp",loading:"lazy",decoding:"async",width:"144",height:"108"},null,r,s))})),_:2},d)),u('<span class="cart-item__price" data-v-e55d57f1>'),u(k(p,{name:"my-icon:icon-by-regular"},null,d)),u(` ${w(n.unref(_)(e.product.price))}</span><div class="cart-item__controls" data-v-e55d57f1>`),u(k(v,{onClick:a=>n.unref(s).updateQuantity(e.product.id,e.quantity-1),disabled:e.quantity<=1,"name-class":"remove-quantity-prod","aria-label":n.unref(t)[n.unref(c)].ariaLabelReduceQuantity},null,d)),u(`<span class="quantity-value" aria-live="polite" role="status" aria-atomic="true" data-v-e55d57f1>${w(e.quantity)}</span>`),u(k(v,{onClick:a=>n.unref(s).updateQuantity(e.product.id,e.quantity+1),"name-class":"add-quantity-prod","aria-label":n.unref(t)[n.unref(c)].ariaLabelIncreaseQuantity},null,d)),u("</div>"),u(k(v,{onClick:a=>n.unref(s).removeFromCart(e.product.id),"name-class":"remove-cart-item",icon:"material-symbols:delete-outline-rounded",class:"cart-item__remove-from-cart","aria-label":n.unref(t)[n.unref(c)].ariaLabelRemoveItemFromCart},null,d)),u("</li>")})),u("\x3c!--]--\x3e</ul>")}}}),L=j.setup;j.setup=(e,a)=>{const t=n.useSSRContext();return(t.modules||(t.modules=new Set)).add("components/CartShopping.vue"),L?L(e,a):void 0};const O=Object.assign(o(j,[["__scopeId","data-v-e55d57f1"]]),{__name:"CartShopping"}),P={ru:{title:"Оформление заказа",email:"Почта",phone:"Телефон",checkbox:"Согласен с условиями обработки данных",total:"Итого:",checkout:"Оформить",submitting:"Оформляем...",showSuccessMessage:"Заказ оформлен!"},en:{title:"Placing an order",email:"Email",phone:"Phone",checkbox:"I agree with the terms of data processing",total:"Total:",checkout:"Checkout",submitting:"We are making out...",showSuccessMessage:"The order has been placed!"},be:{title:"Афармленне замовы",email:"Пошта",phone:"Тэлефон",checkbox:"Згодзен з умовамі апрацоўкі дадзеных",total:"Усяго:",checkout:"Аформіць",submitting:"Афармляем...",showSuccessMessage:"Заказ аформлены!"}},q=f("order",(()=>{const{create:a}=e(),t=b();return{createOrder:async(e,r)=>{try{const s={items:t.items,total:t.totalPrice,email:e,phone:r,statusOrders:"new"},l=await a("orders",s);return t.clearCart(),l}catch(e){throw console.error("Ошибка при создании заказа:",e),e}}}})),D=n.defineComponent({__name:"OrderForm",__ssrInlineRender:!0,emits:["order-success"],setup(e,{emit:t}){const{currentLocale:r}=i(),s=b();q();const o=n.ref(!1),c=n.reactive({email:"",phone:"",agree:!1});return(e,t,i,u)=>{const d=a,m=l;t(`<div${$(n.mergeProps({class:["order-form",{"order-form_disabled":n.unref(o)||0===n.unref(s).totalItems}]},u))} data-v-772a6573><h3 class="order-form__title" data-v-772a6573>${w(n.unref(P)[n.unref(r)].title)}</h3><form class="order-form__form" data-v-772a6573><label class="order-form__label" for="email" data-v-772a6573>${w(n.unref(P)[n.unref(r)].email)}</label><input${C("value",n.unref(c).email)} type="email" id="email"${I(n.unref(o)||0===n.unref(s).totalItems)?" disabled":""} placeholder="your@email.com" class="order-form__input" data-v-772a6573><label class="order-form__label" for="phone" data-v-772a6573>${w(n.unref(P)[n.unref(r)].phone)}* </label><input${C("value",n.unref(c).phone)} type="tel" required${I(n.unref(o)||0===n.unref(s).totalItems)?" disabled":""} id="phone" placeholder="+375(00) 000-00-00" class="order-form__input" data-v-772a6573><label class="order-form__checkbox-label" data-v-772a6573><input${I(Array.isArray(n.unref(c).agree)?S(n.unref(c).agree,null):n.unref(c).agree)?" checked":""} type="checkbox" required${I(n.unref(o)||0===n.unref(s).totalItems)?" disabled":""} class="order-form__checkbox" data-v-772a6573><span class="order-form__conditions" data-v-772a6573>${w(n.unref(P)[n.unref(r)].checkbox)}</span></label>`),t(k(d,{size:"large",type:"submit",disabled:n.unref(o)||0===n.unref(s).totalItems,label:n.unref(o)?n.unref(P)[n.unref(r)].submitting:n.unref(P)[n.unref(r)].checkout,class:"order-form__btn"},null,i)),t(`</form><div class="order-form__total" data-v-772a6573><b data-v-772a6573>${w(n.unref(P)[n.unref(r)].total)}</b><strong aria-live="polite" role="status" aria-atomic="true" data-v-772a6573>`),t(k(m,{name:"my-icon:icon-by-regular"},null,i)),t(` ${w(n.unref(_)(n.unref(s).totalPrice))}</strong></div></div>`)}}}),N=D.setup;D.setup=(e,a)=>{const t=n.useSSRContext();return(t.modules||(t.modules=new Set)).add("components/OrderForm.vue"),N?N(e,a):void 0};const R=Object.assign(o(D,[["__scopeId","data-v-772a6573"]]),{__name:"OrderForm"}),B={ru:{title:"Заказ #{orderId} успешно сформирован!",notice:"В ближайшее время с вами свяжутся.",thanks:"Благодарим за заказ!"},en:{title:"Order #{orderId} successfully placed!",notice:"We will contact you shortly.",thanks:"Thank you for your order!"},be:{title:"Заказ #{orderId} паспяхова створаны!",notice:"У бліжэйшы час з вамі звяжуцца.",thanks:"Дзякуем за заказ!"}},F=n.defineComponent({__name:"cartshopping",__ssrInlineRender:!0,setup(t){const{currentLocale:o}=i(),f=b(),{goBack:C}=y(),{find:S}=e(),I=d();c({title:g[o.value].title,ogTitle:g[o.value].title,description:g[o.value].description,ogDescription:g[o.value].description});const{data:j}=s(`product-discount-${o.value}`,(async()=>{const e=await S("products",{filters:{locale:o.value,isDiscount:!0},pagination:{pageSize:100},populate:{image:{fields:["alternativeText","url"]},subcategory:{fields:["name","slug"],populate:{category:{fields:["name","slug"]}}}}});if(!e.data||0===e.data.length)throw u({statusCode:404,statusMessage:"Product - Not Found"});return e.data})),L=n.ref(!1),P=n.ref(""),q=n.ref(""),D=n.ref(""),handleOrderSuccess=e=>{const a=B[o.value];P.value=a.title.replace("{orderId}",e.toString()),q.value=a.notice,D.value=a.thanks,L.value=!0,setTimeout((()=>{L.value=!1}),7e3)};return(e,t,s,i)=>{const c=a,u=r,d=O,b=l,y=p,S=m,N=h,B=R;t(`<section${$(n.mergeProps({class:["cart-page",{"cart-page_empty":0===n.unref(f).totalItems}],"aria-labelledby":"cart-page"},i))} data-v-f2c0f725><h1 class="visually-hidden" id="cart-page" data-v-f2c0f725>${w(n.unref(g)[n.unref(o)].visuallyHidden)}</h1>`),t(k(c,{onClick:n.unref(C),icon:"material-symbols:arrow-back","aria-label":"go back","name-class":"go-forward-back",class:"cart-page__go-back"},null,s)),0===n.unref(f).totalItems?(t('<div class="cart-page__cart-empty cart-empty" data-v-f2c0f725><div class="cart-empty__body" data-v-f2c0f725><ul class="cart-empty__list" data-v-f2c0f725><li class="cart-empty__item" data-v-f2c0f725>'),t(k(u,{src:"image/valberg_new-removebg-preview.png",alt:"image",format:"webp",width:"122"},null,s)),t('</li><li class="cart-empty__item" data-v-f2c0f725>'),t(k(u,{src:"image/aiko_new_1-removebg-preview.png",alt:"image",format:"webp",width:"122"},null,s)),t('</li><li class="cart-empty__item" data-v-f2c0f725>'),t(k(u,{src:"image/praktik_profi_rgb-removebg-preview.png",alt:"image",format:"webp",width:"122"},null,s)),t('</li><li class="cart-empty__item" data-v-f2c0f725>'),t(k(u,{src:"image/praktik-home_rgb-removebg-preview.png",alt:"image",format:"webp",width:"122"},null,s)),t('</li></ul></div><div class="cart-empty__image" data-v-f2c0f725>'),t(k(u,{src:"image/cart-empty-img.png",alt:"image",format:"webp",width:"286"},null,s)),t(`<span class="cart-empty__text" data-v-f2c0f725>${w(n.unref(g)[n.unref(o)].cartEmpty)}</span></div></div>`)):t("\x3c!----\x3e"),t(`<div class="cart-page__body" data-v-f2c0f725><div class="cart-page__cart-items" data-v-f2c0f725><h2 class="cart-page__title" data-v-f2c0f725>${w(n.unref(g)[n.unref(o)].title)}</h2><span aria-atomic="true" aria-live="polite" role="status" class="cart-page__total" data-v-f2c0f725>${w(n.unref(g)[n.unref(o)].total)} <b data-v-f2c0f725>${w(n.unref(f).totalItems)}</b></span>`),t(k(d,{class:"cart-page__products"},null,s)),0===n.unref(f).totalItems?(t('<ul class="cart-page__discount-card discount-card" data-v-f2c0f725>\x3c!--[--\x3e'),x(n.unref(j),(e=>{var a,r,l;t('<li class="discount-card__item" data-v-f2c0f725><span class="discount-card__promotional" data-v-f2c0f725>'),t(k(b,{name:"mdi:discount-outline"},null,s)),t(` ${w(n.unref(v)[n.unref(o)].discount)}</span>`),t(k(y,{product:e,class:"discount-card__in-stock"},null,s)),t(k(S,{class:"discount-card__link",to:`/${n.unref(o)}/${null==(r=null==(a=null==e?void 0:e.subcategory)?void 0:a.category)?void 0:r.slug}/${null==(l=null==e?void 0:e.subcategory)?void 0:l.slug}/${e.slug}`},{default:n.withCtx(((a,t,r,s)=>{var l,o,i,c;if(!t)return[(null==(i=e.image)?void 0:i.length)?(n.openBlock(),n.createBlock(u,{key:0,class:"discount-card__image",src:`${n.unref(I).public.strapi.url}${null==(c=e.image[0])?void 0:c.url}`,alt:e.name,loading:"lazy",decoding:"async",width:"240",height:"180"},null,8,["src","alt"])):n.createCommentVNode("",!0)];(null==(l=e.image)?void 0:l.length)?t(k(u,{class:"discount-card__image",src:`${n.unref(I).public.strapi.url}${null==(o=e.image[0])?void 0:o.url}`,alt:e.name,loading:"lazy",decoding:"async",width:"240",height:"180"},null,r,s)):t("\x3c!----\x3e")})),_:2},s)),t(`<h3 class="discount-card__title" data-v-f2c0f725>${w(e.name)}</h3><span class="discount-card__price" data-v-f2c0f725>${w(n.unref(_)(e.price))}</span></li>`)})),t("\x3c!--]--\x3e</ul>")):t("\x3c!----\x3e"),n.unref(L)?t(k(N,{type:"success",onClose:e=>L.value=!1},{default:n.withCtx(((e,a,t,r)=>{if(!a)return[n.createVNode("div",null,[n.createVNode("p",null,n.toDisplayString(n.unref(P)),1),n.createVNode("p",null,n.toDisplayString(n.unref(q)),1),n.createVNode("p",null,n.toDisplayString(n.unref(D)),1)])];a(`<div data-v-f2c0f725${r}><p data-v-f2c0f725${r}>${w(n.unref(P))}</p><p data-v-f2c0f725${r}>${w(n.unref(q))}</p><p data-v-f2c0f725${r}>${w(n.unref(D))}</p></div>`)})),_:1},s)):t("\x3c!----\x3e"),t("</div>"),t(k(B,{class:"cart-page__order-form",onOrderSuccess:handleOrderSuccess},null,s)),t("</div></section>")}}}),M=F.setup;F.setup=(e,a)=>{const t=n.useSSRContext();return(t.modules||(t.modules=new Set)).add("pages/[lang]/cartshopping.vue"),M?M(e,a):void 0};const T=o(F,[["__scopeId","data-v-f2c0f725"]]);export{T as default};
//# sourceMappingURL=cartshopping-BP_znlKz.mjs.map
