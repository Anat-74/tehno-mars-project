import{X as e,m as t,M as n,Y as r,Z as l,_ as o,a0 as s,a1 as p,a2 as c,a3 as h,a4 as d,a5 as m,a6 as g,O as v,a7 as y,a8 as N,a9 as x}from"../nitro/nitro.mjs";import{n as w,h as j}from"./_productSlug_-jaqoM19-.mjs";export{T as TEXT_TAGS,f as flatUnwrap,i as isTag,a as isText,b as nodeChildren,u as unwrap}from"./_productSlug_-jaqoM19-.mjs";import"node:buffer";import"node:timers";import"node:events";import"node:process";import"node:util";import"./Loader-B4Hlrbmz.mjs";import"./server.mjs";import"../routes/renderer.mjs";import"../_/shared.esm-bundler.mjs";import"./useStrapi-BZjfg20M.mjs";import"./index-CpWcOAco.mjs";import"./ProductStatus-c-DMWgt0.mjs";import"./AppNotification-D1x78Gdr.mjs";import"./NuxtImg-BJWs2ZwM.mjs";import"./visuallyHidden-CsncTQkD.mjs";import"./useCartStore-iBuykjA7.mjs";import"./useIsInCart-DgPYkn2k.mjs";import"./useGoToForwardOrBack-ClO4dsvn.mjs";const useProcessorPlugins=async(e,t={})=>{const n=Object.entries(t).filter((e=>!1!==e[1]));for(const t of n){const n=t[1].instance||await import(t[0]).then((e=>e.default||e));e.use(n,t[1].options)}};function parseHighlightedLines(e){const t=String(e||"").split(",").filter(Boolean).flatMap((e=>{const[t,n]=e.trim().split("-").map((e=>Number(e.trim())));return Array.from({length:(n||t)-t+1}).map(((e,n)=>t+n))}));return t.length?t:void 0}const k=/^<\/?([\w-]+)(\s[^>]*?)?\/?>/;function getTagName(e){const t=String(e).match(k);return t&&t[1]}const D={remark:{plugins:{"remark-mdc":{instance:c},"remark-gfm":{instance:p}}},rehype:{options:{handlers:{emphasis:function(e,t){const n={type:"element",tagName:"em",properties:t.attributes||{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)},code:(e,t)=>{const n=(t.lang||"")+" "+(t.meta||""),{language:i="text",highlights:a,filename:r,meta:l}=function(e){if(!(null==e?void 0:e.trim()))return{language:void 0,highlights:void 0,filename:void 0,meta:void 0};const t=e.replace(/[{|[](.+)/,"").match(/^[^ \t]+(?=[ \t]|$)/),n=e.match(/\{([^}]*)\}/),i=e.match(/\[(.*)\]/),a=e.replace((null==t?void 0:t[0])??"","").replace((null==n?void 0:n[0])??"","").replace((null==i?void 0:i[0])??"","").trim();let r;return(null==i?void 0:i[1])&&(r=i[1].replace(/\\([[\]{}().*+?^$|])/g,"$1")),{language:(null==t?void 0:t[0])||void 0,highlights:parseHighlightedLines((null==n?void 0:n[1])||void 0),filename:r,meta:a}}(n),o=t.value?y(t.value+"\n"):"";let s={type:"element",tagName:"code",properties:{__ignoreMap:""},children:[{type:"text",value:o}]};l&&(s.data={meta:l}),e.patch(t,s),s=e.applyData(t,s);const p={language:i||"text",filename:r,highlights:a,meta:l,code:o};return i&&(p.className=["language-"+i]),s={type:"element",tagName:"pre",properties:p,children:[s]},e.patch(t,s),s},link:function(e,t){const n={...t.attributes||{},href:g(t.url)};null!==t.title&&void 0!==t.title&&(n.title=t.title);const i={type:"element",tagName:"a",properties:n,children:e.all(t)};return e.patch(t,i),e.applyData(t,i)},paragraph:function(e,t){if(t.children&&t.children[0]&&"html"===t.children[0].type){const n=v(getTagName(t.children[0].value)||"div");if(!j.includes(n))return e.all(t)}const n={type:"element",tagName:"p",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)},html:function(e,t){var n;const i=getTagName(t.value);if(i&&/[A-Z]/.test(i)&&(t.value=t.value.replace(i,v(i))),e.dangerous||(null==(n=e.options)?void 0:n.allowDangerousHtml)){const n={type:"raw",value:t.value};return e.patch(t,n),e.applyData(t,n)}},list:function(e,t){const n={},i=e.all(t);let a=-1;for("number"==typeof t.start&&1!==t.start&&(n.start=t.start);++a<i.length;){const e=i[a];if("element"===e.type&&"li"===e.tagName&&e.properties&&Array.isArray(e.properties.className)&&e.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}(t.children||[]).some((e=>"boolean"==typeof e.checked))&&(n.className=["contains-task-list"]);const r={type:"element",tagName:t.ordered?"ol":"ul",properties:n,children:e.wrap(i,!0)};return e.patch(t,r),e.applyData(t,r)},image:function(e,t){const n={...t.attributes,src:g(t.url)};null!==t.alt&&void 0!==t.alt&&(n.alt=t.alt),null!==t.title&&void 0!==t.title&&(n.title=t.title);const i={type:"element",tagName:"img",properties:n,children:[]};return e.patch(t,i),e.applyData(t,i)},strong:function(e,t){const n={type:"element",tagName:"strong",properties:t.attributes||{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)},inlineCode:function(e,t){var n,i;const a=(null==(n=t.attributes)?void 0:n.language)||(null==(i=t.attributes)?void 0:i.lang),r={type:"text",value:t.value.replace(/\r?\n|\r/g," ")};e.patch(t,r);const l={type:"element",tagName:"code",properties:t.attributes||{},children:[r]},o=(l.properties.class||"").split(" ");return delete l.properties.class,a&&(l.properties.language=a,delete l.properties.lang,o.push("language-"+a)),l.properties.className=o.join(" "),e.patch(t,l),e.applyData(t,l)},containerComponent:function(e,t){var n;const i={type:"element",tagName:t.name,properties:{...t.attributes,...null==(n=t.data)?void 0:n.hProperties},children:e.all(t)};return e.patch(t,i),i.attributes=t.attributes,i.fmAttributes=t.fmAttributes,i}},allowDangerousHtml:!0},plugins:{"rehype-external-links":{instance:s},"rehype-sort-attribute-values":{instance:o},"rehype-sort-attributes":{instance:l},"rehype-raw":{instance:r,options:{passThrough:["element"]}}}},highlight:!1,toc:{searchDepth:2,depth:2}};function flattenNodeText(e){return"comment"===e.type?"":"text"===e.type?e.value||"":(e.children||[]).reduce(((e,t)=>e.concat(flattenNodeText(t))),"")}function flattenNode(e,t=2,n=0){return Array.isArray(e.children)&&n!==t?[e,...e.children.reduce(((e,i)=>e.concat(flattenNode(i,t,n+1))),[])]:[e]}const O=["h2","h3","h4","h5","h6"],C=O.reduce(((e,t)=>(e[t]=Number(t.charAt(t.length-1)),e)),{}),getHeaderDepth=e=>C[e.tag];function nestHeaders(e){if(e.length<=1)return e;const t=[];let n;return e.forEach((e=>{!n||e.depth<=n.depth?(e.children=[],n=e,t.push(e)):n.children.push(e)})),t.forEach((e=>{var t;(null==(t=e.children)?void 0:t.length)?e.children=nestHeaders(e.children):delete e.children})),t}function generateFlatToc(e,t){const{searchDepth:n,depth:i,title:a=""}=t,r=(e=>((e<1||e>5)&&(console.log(`\`toc.depth\` is set to ${e}. It should be a number between 1 and 5. `),e=1),O.slice(0,e)))(i);return{title:a,searchDepth:n,depth:i,links:flattenNode(e,n).filter((e=>r.includes(e.tag||""))).map((e=>{var t;return{id:null==(t=e.props)?void 0:t.id,depth:getHeaderDepth(e),text:flattenNodeText(e)}}))}}function generateToc(e,t){const n=generateFlatToc(e,t);return n.links=nestHeaders(n.links),n}const S=["javascript:","data:text/html","vbscript:","data:text/javascript","data:text/vbscript","data:text/css","data:text/plain","data:text/xml"];const validateProp=(e,t)=>!e.startsWith("on")&&("href"!==e&&"src"!==e||function(e){const t=decodeURIComponent(e).replace(/&#x([0-9a-f]+);?/gi,"").replace(/&#(\d+);?/g,"").replace(/&[a-z]+;?/gi,"");try{const e=new URL(t,"http://example.com");if("http://example.com"===e.origin)return!0;if(S.some((t=>e.protocol.toLowerCase().startsWith(t))))return!1}catch{return!1}return!0}(t));function compileHast(e={}){const t=new N;function compileToJSON(n,i){var a,r,l,o,s,p,c,h,u;if("root"===n.type)return{type:"root",children:n.children.map((e=>compileToJSON(e,n))).filter(Boolean)};const d=(null==(r=null==(a=n.position)?void 0:a.start)?void 0:r.offset)&&(null==(o=null==(l=n.position)?void 0:l.end)?void 0:o.offset)?{start:n.position.start.offset,end:n.position.end.offset}:void 0;if("element"===n.type){if("p"===n.tagName&&n.children.every((e=>"text"===e.type&&/^\s*$/.test(e.value))))return null;if("li"===n.tagName){let e=!1;n.children=null==(s=n.children)?void 0:s.flatMap((t=>"element"===t.type&&"p"===t.tagName?(e&&t.children.unshift({type:"element",tagName:"br",properties:{},children:[]}),e=!0,t.children):t))}(null==(p=n.tagName)?void 0:p.match(/^h\d$/))&&(n.properties=n.properties||{},n.properties.id=String((null==(c=n.properties)?void 0:c.id)||t.slug(x(n))).replace(/-+/g,"-").replace(/^-|-$/g,"").replace(/^(\d)/,"_$1")),"component-slot"===n.tagName&&(n.tagName="template");const i=("template"===n.tagName&&(null==(h=n.content)?void 0:h.children.length)?n.content.children:n.children).map((e=>compileToJSON(e,n))).filter(Boolean),a={type:"element",tag:n.tagName,props:(m=n.tagName,g=n.properties,g?(g=Object.fromEntries(Object.entries(g).filter((([e,t])=>{const n=validateProp(e,t);return n||console.warn(`[@nuxtjs/mdc] removing unsafe attribute: ${e}="${t}"`),n}))),"pre"===m&&"string"==typeof g.highlights&&(g.highlights=g.highlights.split(" ").map((e=>Number.parseInt(e)))),g):{}),children:i};return e.keepPosition&&(a.position=d),a}var m,g;return"text"!==n.type||/^\n+$/.test(n.value||"")&&!(null==(u=null==i?void 0:i.properties)?void 0:u.emptyLinePlaceholder)?e.keepComments&&"comment"===n.type?e.keepPosition?{type:"comment",value:n.value,position:d}:{type:"comment",value:n.value}:null:e.keepPosition?{type:"text",value:n.value,position:d}:{type:"text",value:n.value}}this.Compiler=e=>{const t=compileToJSON(e);let n;const i=e.children.findIndex((e=>{var t;return"comment"===e.type&&"more"===(null==(t=e.value)?void 0:t.trim())}));if(-1!==i&&(n=compileToJSON({type:"root",children:e.children.slice(0,i)}),n.children.find((e=>"element"===e.type&&"pre"===e.tag)))){const e=t.children[t.children.length-1];"element"===e.type&&"style"===e.tag&&n.children.push(e)}return t.children=(t.children||[]).filter((e=>"text"!==e.type)),{body:t,excerpt:n}}}let A,H;const createParseProcessor=async(e={})=>{var t,i,a,r,l,o,s,p,c,u,g,f,v;A||(A=await import("./mdc-imports-CfzcODwh.mjs").catch((()=>({})))),H||(H=await import("./mdc-configs-D-mPnyQ5.mjs").then((e=>e.getMdcConfigs())).catch((()=>[])));const y=[...H||[],...e.configs||[]];null!=e.highlight&&0!=e.highlight&&void 0!==e.highlight.highlighter&&"function"!=typeof e.highlight.highlighter&&delete(e={...e,highlight:{...e.highlight}}).highlight.highlighter;const N=n(e,{remark:{plugins:null==A?void 0:A.remarkPlugins},rehype:{plugins:null==A?void 0:A.rehypePlugins},highlight:null==A?void 0:A.highlight},D);(null==(i=null==(t=N.rehype)?void 0:t.plugins)?void 0:i.highlight)&&(!1===e.highlight?delete N.rehype.plugins.highlight:N.rehype.plugins.highlight.options={...N.rehype.plugins.highlight.options||{},...N.highlight||{}});let b=h();for(const e of y)b=await(null==(r=null==(a=e.unified)?void 0:a.pre)?void 0:r.call(a,b))||b;b.use(d);for(const e of y)b=await(null==(o=null==(l=e.unified)?void 0:l.remark)?void 0:o.call(l,b))||b;await useProcessorPlugins(b,null==(s=N.remark)?void 0:s.plugins),b.use(m,null==(p=N.rehype)?void 0:p.options);for(const e of y)b=await(null==(u=null==(c=e.unified)?void 0:c.rehype)?void 0:u.call(c,b))||b;await useProcessorPlugins(b,null==(g=N.rehype)?void 0:g.plugins),b.use(compileHast,N);for(const e of y)b=await(null==(v=null==(f=e.unified)?void 0:f.post)?void 0:v.call(f,b))||b;return b},createMarkdownParser=async(i={})=>{const a=await createParseProcessor(i);return async function(r,{fileOptions:l}={}){const{content:o,data:s}=await e(r),p=void 0!==t&&"function"==typeof t.cwd?t.cwd():"/tmp",c=await new Promise(((e,t)=>{a.process({cwd:p,...l,value:o,data:s},((n,i)=>{n?t(n):e(i)}))})),h=null==c?void 0:c.result,u=Object.assign(!1!==i.contentHeading?function(e){let t="",n="";const i=e.children.filter((e=>"element"===e.type&&"hr"!==e.tag));if(i.length&&"h1"===i[0].tag){const e=i.shift();t=w(e)}if(i.length&&"p"===i[0].tag){const e=i.shift();n=w(e)}return{title:t,description:n}}(h.body):{},s,(null==c?void 0:c.data)||{}),d={data:u,body:h.body},m=u.toc??i.toc;if(!1!==m){const e=n({},m,D.toc);d.toc=generateToc(h.body,e)}return h.excerpt&&(d.excerpt=h.excerpt),d}},parseMarkdown=async(e,t={},n={})=>(await createMarkdownParser(t))(e.replace(/\r\n/g,"\n"),n);export{createMarkdownParser,createParseProcessor,w as nodeTextContent,parseMarkdown};
//# sourceMappingURL=index-HEoSOl_T.mjs.map
